<!DOCTYPE html>
<html lang="en">
 <head> 
	<meta charset=utf-8 />

	<title>弗兰科信息安全科技有限公司</title>
    <meta name="description" content="杭州弗兰科信息安全科技有限公司，是国家商用密码管理局指定的定点商密生产单位和定点商密销售单位。 致力于移动信息安全产品的研发及应用，在移动信息安全的核心技术方面已经形成突出优势；">
    <meta name="keywords" content="弗兰科,加密,私密信息,信息安全,即时通讯,flk,短信加密,加密通话,加密聊天,保密信息,保密通讯录,第三方加密,iphone,android,网页版,web">
    <link type="text/css" href="./test.css" rel="stylesheet"/>
    <script src="./jquery-1.10.1.min.js"></script>

    <script>

        $(document).ready(function(){
            console.log("加载完成");
            function RequestApi(type,url,data,callback,errorCallback){
                $.ajax({
                    type: type,
                    url:  url,
                    data: data,
                    dataType: "json",
                    success: function(data){
                        if(data.message==="success"){
                            callback(data);
                        }else{
                            errorCallback && errorCallback(data);
                        }
                    },
                    error:function(error){
                    }
                })
            }

            function urlEncode(param, key, encode) {  
                if(param==null) return '';  
                var paramStr = '';  
                var t = typeof (param);  
                if (t == 'string' || t == 'number' || t == 'boolean') {  
                    paramStr += '&' + key + '=' + ((encode==null||encode) ? encodeURIComponent(param) : param);  
                } else {  
                    for (var i in param) {  
                    var k = key == null ? i : key + (param instanceof Array ? '[' + i + ']' : '.' + i);  
                    paramStr += urlEncode(param[i], k, encode);  
                    }  
                }  
                return paramStr;  
            }; 



            var ws = new WebSocket('ws://127.0.0.1:8001'); 

            $("#getUserName").click(function(){
                var params = {
                };
                RequestApi('post','/getUserName',params,function(data){
                    console.log(data);
                }); 
            });

            $("#testDatabase").click(function(){
                var params = {
                };
                RequestApi('post','/testDatabase',params,function(data){
                    console.log(data);
                }); 
            });

            $("#getDatabase").click(function(){
                var params = {
                    haha:"haode",
                    nini:"yes",
                    type:"preson"
                };
                RequestApi('post','/getDatabase',params,function(data){
                    console.log(data);
                }); 
            });



            $("#close").click(function(){
                ws.close();
            });

            $("#websocket").click(function(){
                ws.send("hh");
            });    

            window.onunload = function(){

                ws.close();
            }

            $("#postFile").click(function(){
                var formData = new FormData();
                console.log($("#postFileInput")[0].files[0]);
                formData.append("fileBinaryString",$("#postFileInput")[0].files[0]);
                formData.append("fileName","特别好啊啊啊啊啊啊");
                $.ajax({ 
                    url : '/postFile', 
                    type : 'POST', 
                    data : formData, 
                    // 告诉jQuery不要去处理发送的数据
                    processData : false, 
                    // 告诉jQuery不要去设置Content-Type请求头
                    contentType : false,
                    beforeSend:function(){
                        console.log("正在进行，请稍候");
                    },
                    success : function(responseStr) { 
                        if(responseStr.status===0){
                            console.log("成功"+responseStr);
                        }else{
                            console.log("失败");
                        }
                    }, 
                    error : function(responseStr) { 
                        console.log("error");
                    } 
                });
                
            });


            $("#intertHundred").click(function(){
                var params = {
                };
                RequestApi('post','/intertHundred',params,function(data){
                    console.log(data);
                }); 
            }); 

            $("#page").click(function(){
                var params = {
                    offset:3,
                    rows:10
                };
                RequestApi('post','/page',params,function(data){
                    console.log(data);
                    console.log(data.results[1].name);
                }); 
            }); 


            $("#excel").click(function(){
                var params = {
                    offset:3,
                    rows:10
                };
                var url =  "/exportExcel" ;
                window.location = url+"?"+urlEncode(params);
                //window.location = url;


            }); 


        });


    </script>

 </head>
    
 <body>
   <div  id="excel" class="test-block" >
       excel
   </div>

   <div  id="page" class="test-block" >
       page
   </div>
   <div  id="intertHundred" class="test-block" >
       intertHundred
   </div>
   
   <div  class="test-block" >
        <form action="/upload" enctype="multipart/form-data" method="POST">  
        <input type="file" name="image11">  
        <input type="submit" value="上传">  
        </form>
    </div>  

   <div  class="test-block" >
       <input id="postFileInput"  type="file" />
   </div>
   <div  id="postFile" class="test-block" >
       点击提交postFileInput
   </div>

   <div id="testDatabase" class="test-block">
       testDatabase
   </div>

   <div id="getDatabase" class="test-block">
       getDatabase
   </div>

   <div id="websocket" class="test-block">
       websocket
   </div>

   <div id="close" class="test-block">
       close
   </div>

   <div id="getUserName" class="test-block">
       getUserName
   </div>

   <div class="test-block">
       <a target="_blank" href="http://wpa.qq.com/msgrd?v=3&uin=2939981731&site=qq&menu=yes">与qq客服聊天</a>
   </div>
   
   <div class="test-block">
       <a target="_blank" href="dingtalk://dingtalkclient/action/sendmsg?dingtalk_id=fiona2014">与钉钉客服fiona2014</a>
   </div>

   <div class="test-block">
       <a target="_blank" href="dingtalk://dingtalkclient/action/sendmsg?dingtalk_id=13738196287">与钉钉客服13738196287</a>
   </div>



 </body>
</html>
